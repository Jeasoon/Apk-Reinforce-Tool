# 使用Exe4j打包Exe及使用说明

---

## 1. 配置

### 文件：buildExe.exe4j
该文件是exe4j配置文件，可以用exe4j程序打开，基本配置已经准备好了；

不过在配置的时候还需要配置res目录下的资源文件app_icon.ico(图标)和app_icon.png(载入图片)

### 目录：res
该目录是配置生成exe程序的图标(app_icon.ico)和载入图片(app_icon.png)资源，需要exe4j中手动配置

### 文件：AppReinforceToo.jar
主要程序的jar包，最好不要修改名称，否则需要在exe4j中重新配置该jar包名称

因为该jar比较大，所以代码仓库没有上传，可以自己从AppReinforceTool模块生成

## 2. 运行

### jre环境
如果要使用自定义的jre，需要将jre与生成的ApkReinforceTool.exe放到同一个目录下，因为jre太大，精简也太麻烦，就没有放到这里；

如果没有自定义jre，可以识别正常安装的jre，如果没有识别，可以在环境变量里配置JAVA_HOME、JDK_HOME、JRE_HOME，配置其中一个就可以

### ApkReinforceTool.exe使用
1. 直接打开：设置源apk路径，输出apk路径(可以缺省，则为源apk相同目录，名称后缀为-Reinforced-Signed-ZipAligned)
2. 源apk拖入exe中：此时代表有一个参数，效果等同于直接打开，设置了源apk路径，并且开始执行加固
3. 控制台启动：第一个参数为源apk路径，第二个为输出apk路径(可以缺省)，效果等同于直接打开，设置了源apk路径，输出apk路径，并且开始执行加固

## 3. 界面

### 按钮：开始加固/中止加固
选定好源apk或者输出apk路径后，控制开始或者停止

### 信息：内存/耗时
展示当前界面程序使用的内存(不包含加固时消耗的内存，因为加固是子进程，抓取麻烦点，这里省略了)和加固时的耗时

### 信息：运行日志
加固子进程的日志输出信息；

加固完成后，最后一行为加固子进程的结束返回码，如果不为0则说明出现错误了，可以去上边的日志找详细信息；

加固完成后，倒数第二行为加固子进程的结束的信息，包括是否成功，加固时的内存，加固消耗的时间

